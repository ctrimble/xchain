<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Apr 7, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130407" />
    <meta http-equiv="Content-Language" content="en" />
    <title>XChain Framework - CPD Results</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>XChain Framework : Core Module</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: Apr 07 2013</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.5.0-SNAPSHOT</li>
                          <li class="divider">|</li>             <li class="">
                    <a href="http://xiantrimble.com/xchain" class="externalLink" title="XChain Framework">
        XChain Framework</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="index.html" title="Core Module">
        Core Module</a>
        </li>
      <li class="divider ">/</li>
        <li class="">CPD Results</li>
                
                
            
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
            
                <ul class="nav nav-list">
                    <li class="nav-header">Core Module</li>
                                
      <li>
    
                          <a href="index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                              <li class="nav-header">Documentation</li>
                                
      <li>
    
                          <a href="guides/command-definition.html" title="Command Definition">
          <i class="none"></i>
        Command Definition</a>
            </li>
                  
      <li>
    
                          <a href="guides/attribute-definition.html" title="Attribute Defintiions">
          <i class="none"></i>
        Attribute Defintiions</a>
            </li>
                  
      <li>
    
                          <a href="guides/lifecycle.html" title="Lifecycle">
          <i class="none"></i>
        Lifecycle</a>
            </li>
                  
      <li>
    
                          <a href="guides/commands-that-output-sax.html" title="SAX Pipelines">
          <i class="none"></i>
        SAX Pipelines</a>
            </li>
                              <li class="nav-header">Namespaces</li>
                                
      <li>
    
                          <a href="namespaces/core.html" title="Core">
          <i class="none"></i>
        Core</a>
            </li>
                  
      <li>
    
                          <a href="namespaces/sax.html" title="SAX">
          <i class="none"></i>
        SAX</a>
            </li>
                  
      <li>
    
                          <a href="namespaces/jsl.html" title="JSL">
          <i class="none"></i>
        JSL</a>
            </li>
                  
      <li>
    
                          <a href="namespaces/csv.html" title="CSV">
          <i class="none"></i>
        CSV</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                                              
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                              
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-down"></i>
        Project Reports</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="apidocs/index.html" title="JavaDocs">
          <i class="none"></i>
        JavaDocs</a>
            </li>
                      
      <li>
    
                          <a href="xref-test/index.html" title="Test Source Xref">
          <i class="none"></i>
        Test Source Xref</a>
            </li>
                      
      <li>
    
                          <a href="xref/index.html" title="Source Xref">
          <i class="none"></i>
        Source Xref</a>
            </li>
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>CPD Report</a>
          </li>
                      
      <li>
    
                          <a href="pmd.html" title="PMD Report">
          <i class="none"></i>
        PMD Report</a>
            </li>
                      
      <li>
    
                          <a href="surefire-report.html" title="Surefire Report">
          <i class="none"></i>
        Surefire Report</a>
            </li>
                      
      <li>
    
                          <a href="dependency-analysis.html" title="Dependency Analysis">
          <i class="none"></i>
        Dependency Analysis</a>
            </li>
                      
      <li>
    
                          <a href="checkstyle.html" title="Checkstyle">
          <i class="none"></i>
        Checkstyle</a>
            </li>
                      
      <li>
    
                          <a href="cobertura/index.html" title="Cobertura Test Coverage">
          <i class="none"></i>
        Cobertura Test Coverage</a>
            </li>
              </ul>
        </li>
            </ul>
                
            
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section"><h2>CPD Results<a name="CPD_Results"></a></h2><p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 5.0.2.</p></div><div class="section"><h2>Duplications<a name="Duplications"></a></h2><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/xchain/framework/scanner/JarProtocolScanner.java</td><td><a href="./xref/org/xchain/framework/scanner/JarProtocolScanner.html#62">62</a></td></tr><tr class="a"><td>org/xchain/framework/scanner/ZipProtocolScanner.java</td><td><a href="./xref/org/xchain/framework/scanner/ZipProtocolScanner.html#74">74</a></td></tr><tr class="b"><td colspan='2'><div><pre>  }

  /**
   * &lt;p&gt;Adds an entry to the root node for a JarEntry.  This method is declared to be protected, so that test cases an interact with it.
   * In general, this method should be treaded as private.&lt;/p&gt;
   *
   * @param rootNode the root node of the scan.
   * @param entry the jar entry to place under the root node.
   */
  void insertEntryNodes( ScanNode rootNode, JarEntry entry )
  {
    String name = entry.getName();
    // TODO: verify that this works on windows.
    String[] parts = name.split(&quot;\\/&quot;);
    int depth = 0;
    ScanNode parentNode = rootNode;

    // create any missing directory nodes.
    for( int i = 0; i &lt; parts.length - 1; i++ ) {
      ScanNode currNode = parentNode.getChildMap().get(parts[i]);
      if( currNode == null ) {
        currNode = new ScanNode();
        currNode.setResourceName(&quot;&quot;.equals(parentNode.getResourceName())?parts[i]:parentNode.getResourceName()+&quot;/&quot;+parts[i]);
        currNode.setName(parts[i]);
        currNode.setDirectory(true);
        currNode.setFile(false);
        parentNode.getChildMap().put(parts[i], currNode);
      }
      else {
        currNode.setDirectory(true);
      }
      parentNode = currNode;
    }

    // ASSERT: parentNode is now the parent node of this entry.

    // create the entry node if it is not already in the scan tree.
    ScanNode currNode = parentNode.getChildMap().get(parts[parts.length-1]);
    if( currNode == null ) {
      currNode = new ScanNode();
      currNode.setResourceName(&quot;&quot;.equals(parentNode.getResourceName())?parts[parts.length-1]:parentNode.getResourceName()+&quot;/&quot;+parts[parts.length-1]);
      currNode.setName(parts[parts.length-1]);
      currNode.setDirectory(entry.isDirectory()?true:false);
      currNode.setFile(entry.isDirectory()?false:true);
      parentNode.getChildMap().put(parts[parts.length-1], currNode);
    }
    else {
      if( entry.isDirectory() ) {
        currNode.setDirectory(true);
      }
      else {
        currNode.setFile(true);
      }
    }
  }
}</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/xchain/framework/scanner/BundleProtocolScanner.java</td><td><a href="./xref/org/xchain/framework/scanner/BundleProtocolScanner.html#126">126</a></td></tr><tr class="a"><td>org/xchain/framework/scanner/JarProtocolScanner.java</td><td><a href="./xref/org/xchain/framework/scanner/JarProtocolScanner.html#75">75</a></td></tr><tr class="b"><td>org/xchain/framework/scanner/ZipProtocolScanner.java</td><td><a href="./xref/org/xchain/framework/scanner/ZipProtocolScanner.html#87">87</a></td></tr><tr class="a"><td colspan='2'><div><pre>    String[] parts = name.split(&quot;\\/&quot;);
    int depth = 0;
    ScanNode parentNode = rootNode;

    // create any missing directory nodes.
    for( int i = 0; i &lt; parts.length - 1; i++ ) {
      ScanNode currNode = parentNode.getChildMap().get(parts[i]);
      if( currNode == null ) {
        currNode = new ScanNode();
        currNode.setResourceName(&quot;&quot;.equals(parentNode.getResourceName())?parts[i]:parentNode.getResourceName()+&quot;/&quot;+parts[i]);
        currNode.setName(parts[i]);
        currNode.setDirectory(true);
        currNode.setFile(false);
        parentNode.getChildMap().put(parts[i], currNode);
      }
      else {
        currNode.setDirectory(true);
      }
      parentNode = currNode;
    }

    // ASSERT: parentNode is now the parent node of this entry.

    // create the entry node if it is not already in the scan tree.
    ScanNode currNode = parentNode.getChildMap().get(parts[parts.length-1]);
    if( currNode == null ) {
      currNode = new ScanNode();
      currNode.setResourceName(&quot;&quot;.equals(parentNode.getResourceName())?parts[parts.length-1]:parentNode.getResourceName()+&quot;/&quot;+parts[parts.length-1]);
      currNode.setName(parts[parts.length-1]);
      currNode.setDirectory(isDirectory(name)?true:false);</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/xchain/framework/lifecycle/LifecycleStepScanner.java</td><td><a href="./xref/org/xchain/framework/lifecycle/LifecycleStepScanner.html#135">135</a></td></tr><tr class="b"><td>org/xchain/framework/lifecycle/ThreadStepScanner.java</td><td><a href="./xref/org/xchain/framework/lifecycle/ThreadStepScanner.html#129">129</a></td></tr><tr class="a"><td colspan='2'><div><pre>  }

  public void scanNode( ScanNode node )
    throws ScanException
  {
    try {
      if( isLoadableClassFile(node.getResourceName()) ) {
        String className = toClassName(node);

        CtClass scannedCtClass = null;
        boolean requiresAnnotationScanning = false;

        try {
          scannedCtClass = classPool.get(className);
          requiresAnnotationScanning = hasAnnotation(scannedCtClass, LifecycleClass.class);
        }
        catch( Exception e ) {
          if( log.isDebugEnabled() ) {
            log.debug(&quot;Could not scan file '&quot;+node.getResourceName()+&quot;' due to an exception.&quot;, e);
          }
          return;
        }
        if( requiresAnnotationScanning ) {
          // get the actual class.
          Class lifecycleClass = context.getClassLoader().loadClass(className);

          // get the lifecycle annotation.
          LifecycleClass lifecycleAnnotation = (LifecycleClass)lifecycleClass.getAnnotation(LifecycleClass.class);
          
          // get the uri for the annotations found in the class.
          String namespaceUri = lifecycleAnnotation.uri();

          // scan the lifecycle class for a lifecycle accessor method.
          Method accessorMethod = null;
          int accessorMethodCount = 0;
          for( Method method : lifecycleClass.getDeclaredMethods() ) {
            if( Modifier.isStatic(method.getModifiers()) &amp;&amp; hasAnnotation(method, LifecycleAccessor.class) ) {
              accessorMethod = method;
              accessorMethodCount++;
            }
          }

          if( accessorMethodCount &gt; 1 ) {
            throw new ScanException(&quot;The class '&quot;+lifecycleClass+&quot;' has &quot;+accessorMethodCount+&quot; static methods that are annotated with the LifecycleAccessor annotation.&quot;+
                     &quot; Lifecycle classes should have at most one accessor method.&quot;);
          }

          // scan the class for for start and stop steps.
          for( Method method : lifecycleClass.getMethods() ) {
            boolean isStartStep = hasAnnotation(method, StartStep.class);</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/xchain/framework/digester/SerializationRule.java</td><td><a href="./xref/org/xchain/framework/digester/SerializationRule.html#212">212</a></td></tr><tr class="b"><td>org/xchain/framework/sax/SerializerStage.java</td><td><a href="./xref/org/xchain/framework/sax/SerializerStage.html#59">59</a></td></tr><tr class="a"><td colspan='2'><div><pre>  protected Serializer newSerializer()
  {
    Properties outputProperties = OutputPropertiesFactory.getDefaultMethodProperties( method );

    if ( method.toLowerCase().equals(&quot;html&quot;) ) {
      if (indent == null) indent = true; // default to indenting mode
      outputProperties.setProperty( &quot;media-type&quot;, &quot;text/html&quot; );
      outputProperties.setProperty( &quot;doctype-system&quot;, &quot;http://www.w3.org/TR/html4/loose.dtd&quot; );
      outputProperties.setProperty( &quot;doctype-public&quot;, &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; );
    }
    else if ( method.toLowerCase().equals(&quot;xhtml&quot;) ) {
      if (indent == null) indent = true; // default to indenting mode
      outputProperties.setProperty( &quot;media-type&quot;, &quot;application/xhtml+xml&quot; );
      outputProperties.setProperty( &quot;omit-xml-declaration&quot;, &quot;yes&quot; ); // todo: should be browser sensitive
      outputProperties.setProperty( &quot;doctype-system&quot;, &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot; );
      outputProperties.setProperty( &quot;doctype-public&quot;, &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; );
    }
    else if ( method.toLowerCase().equals(&quot;xml&quot;) ) {
      outputProperties.setProperty( &quot;media-type&quot;, &quot;text/xml&quot; );
    }
    else if ( method.toLowerCase().equals(&quot;text&quot;) ) {
      outputProperties.setProperty( &quot;media-type&quot;, &quot;text/plain&quot; );
    }

    if ( Boolean.TRUE.equals( indent )) {
      outputProperties.setProperty( &quot;indent&quot;, &quot;yes&quot; );
      outputProperties.setProperty( &quot;{http://xml.apache.org/xalan}indent-amount&quot;, &quot;2&quot; );
    }
    else {
      outputProperties.setProperty( &quot;indent&quot;, &quot;no&quot; );
    }

    try {</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/xchain/framework/sax/XChainDeclFilter.java</td><td><a href="./xref/org/xchain/framework/sax/XChainDeclFilter.html#153">153</a></td></tr><tr class="b"><td>org/xchain/framework/sax/XChainTemplatesHandler.java</td><td><a href="./xref/org/xchain/framework/sax/XChainTemplatesHandler.html#176">176</a></td></tr><tr class="a"><td colspan='2'><div><pre>    }
    else if( inProlog ) {
      // cache the processing instruction.
      eventList.add(new ProcessingInstructionEvent(target, data));
    }
    else {
      super.processingInstruction(target, data);
    }
  }

  /**
   * Caches notation decl events until the prolog is finished.
   */
  public void notationDecl(String name, String publicId, String systemId)
    throws SAXException
  {
    if( inProlog ) {
      eventList.add(new NotationDeclEvent(name, publicId, systemId));
    }
    else {
      super.notationDecl(name, publicId, systemId);
    }
  }

  /**
   * Caches unparsed entity decl events until the prolog is finished.
   */
  public void unparsedEntityDecl(String name, String publicId, String systemId, String notationName)
    throws SAXException
  {
    if( inProlog ) {
      eventList.add(new UnparsedEntityDeclEvent(name, publicId, systemId, notationName));
    }
    else {
      super.unparsedEntityDecl(name, publicId, systemId, notationName);
    }
  }

  /**
   * If this start element is the end of the prolog, then endProlog() is called.  Then start
   * elements are passed along.
   */
  public void startElement( String uri, String localName, String qName, Attributes attributes )
    throws SAXException
  {
    if( inProlog ) {
      endProlog();</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/xchain/impl/FilterChainImpl.java</td><td><a href="./xref/org/xchain/impl/FilterChainImpl.html#54">54</a></td></tr><tr class="b"><td>org/xchain/impl/FilterList.java</td><td><a href="./xref/org/xchain/impl/FilterList.html#51">51</a></td></tr><tr class="a"><td colspan='2'><div><pre>    ListIterator&lt;Command&gt; iterator = commandList.listIterator();
    while( iterator.hasNext() ) {
      try {
         saveResult = iterator.next().execute(context);
         if (saveResult) {
           break;
         }
      } catch (Exception e) {
         saveException = e;
         break;
      }
    }

    pushIterator(iterator);

    if( saveException != null ) {
      throw saveException;
    }

    return saveResult;
  }

  public boolean postProcess( JXPathContext context, Exception exception )
  {
    ListIterator&lt;Command&gt; iterator = popIterator();

    boolean handled = false;
    boolean result = false;
    while( iterator.hasPrevious() ) {
      Command previous = iterator.previous();
      if (previous instanceof Filter) {
         try {
           result = ((Filter) previous).postProcess(context, exception);
           if (result) {
             handled = true;
           }
         }
         catch (Exception e) {
           // Silently ignore
         }
      }
    }
    return handled;
  }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/xchain/framework/jsl/SaxTemplateHandler.java</td><td><a href="./xref/org/xchain/framework/jsl/SaxTemplateHandler.html#132">132</a></td></tr><tr class="b"><td>org/xchain/framework/jsl/SaxTemplateHandler.java</td><td><a href="./xref/org/xchain/framework/jsl/SaxTemplateHandler.html#557">557</a></td></tr><tr class="a"><td colspan='2'><div><pre>      throw new SAXException(&quot;Unknown template element '{&quot;+uri+&quot;}&quot;+localName+&quot;'.&quot;);
    }

    if( startSource ) {
      // send start prefix mapping events to the digester.
      for( Map.Entry&lt;String, String&gt; mapping : elementInfoStack.getFirst().getHandlerPrefixMapping().entrySet() ) {
        getContentHandler().startPrefixMapping(mapping.getKey(), mapping.getValue());
      }

      // create a new attributes object with any attributes that are in an xchain namespace.
      AttributesImpl digesterAttributes = new AttributesImpl();
      for( int i = 0; i &lt; attributes.getLength(); i++ ) {
        if( commandNamespaceSet.contains(attributes.getURI(i)) ) {
          digesterAttributes.addAttribute(attributes.getURI(i), attributes.getLocalName(i), attributes.getQName(i), attributes.getType(i), attributes.getValue(i));
        }
      }

      // send the start template element to the digester.
      getContentHandler().startElement( JSL_NAMESPACE, TEMPORARY_CHAIN_LOCAL_NAME, temporaryChainQName(), digesterAttributes );
    }
  }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/xchain/impl/ChainImpl.java</td><td><a href="./xref/org/xchain/impl/ChainImpl.html#50">50</a></td></tr><tr class="b"><td>org/xchain/impl/CommandList.java</td><td><a href="./xref/org/xchain/impl/CommandList.html#47">47</a></td></tr><tr class="a"><td colspan='2'><div><pre>    ListIterator&lt;Command&gt; iterator = commandList.listIterator();
    while( iterator.hasNext() ) {
      try {
         saveResult = iterator.next().execute(context);
         if (saveResult) {
           break;
         }
      } catch (Exception e) {
         saveException = e;
         break;
      }
    }

    boolean handled = false;
    boolean result = false;
    while( iterator.hasPrevious() ) {
      Object previous = iterator.previous();
      if (previous instanceof Filter) {
         try {
           result = ((Filter) previous).postProcess(context, saveException);
           if (result) {
             handled = true;
           }
         }
         catch (Exception e) {
           // Silently ignore
         }
      }
    }

    // Return the exception or result state from the last execute()
    if ((saveException != null) &amp;&amp; !handled) {
      throw saveException;
    }
    else {
      return (saveResult);
    }
  }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/xchain/StandAloneExecutor.java</td><td><a href="./xref/org/xchain/StandAloneExecutor.html#215">215</a></td></tr><tr class="b"><td>org/xchain/namespaces/core/TraceCommand.java</td><td><a href="./xref/org/xchain/namespaces/core/TraceCommand.html#58">58</a></td></tr><tr class="a"><td colspan='2'><div><pre>		if (level.toLowerCase().equals(&quot;trace&quot;)) {
			log.trace(buffer.toString());
		}
		if (level.toLowerCase().equals(&quot;debug&quot;)) {
			log.debug(buffer.toString());
		}
		if (level.toLowerCase().equals(&quot;info&quot;)) {
			log.info(buffer.toString());
		}
		if (level.toLowerCase().equals(&quot;warn&quot;)) {
			log.warn(buffer.toString());
		}
		if (level.toLowerCase().equals(&quot;error&quot;)) {
			log.error(buffer.toString());
		}</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/xchain/framework/lifecycle/AnnotationLifecycleStep.java</td><td><a href="./xref/org/xchain/framework/lifecycle/AnnotationLifecycleStep.html#70">70</a></td></tr><tr class="b"><td>org/xchain/framework/lifecycle/AnnotationThreadStep.java</td><td><a href="./xref/org/xchain/framework/lifecycle/AnnotationThreadStep.html#57">57</a></td></tr><tr class="a"><td colspan='2'><div><pre>  AnnotationLifecycleStep(QName qName) {
    this();
    this.setQName(qName);
  }

  /**
   * &lt;p&gt;Sets the QName for this step.&lt;/p&gt;
   */
  public void setQName(QName qName) { this.qName = qName; }
  /**
   * &lt;p&gt;Returns the QName for this step.&lt;/p&gt;
   */
  public QName getQName() { return this.qName; }
  /**
   * &lt;p&gt;Sets the start method for this annotated lifecycle step.  The method set should take at most one argument of type LifecycleContext.&lt;/p&gt;
   */
  public void setStartMethod( Method startMethod ) { this.startMethod = startMethod; }
  /**
   * &lt;p&gt;Returns the start method.&lt;/p&gt;
   */
  public Method getStartMethod() { return this.startMethod; }
  /**
   * &lt;p&gt;Sets the start method for this annotated lifecycle step.  The method set should take at most one argument of type LifecycleContext.&lt;/p&gt;
   */
  public void setStopMethod( Method stopMethod ) { this.stopMethod = stopMethod; }
  /**
   * &lt;p&gt;Returns the stop method for this annotated lifecycle step.&lt;/p&gt;
   */
  public Method getStopMethod() { return this.stopMethod; }
  /**
   * &lt;p&gt;Sets the method for accessing the lifecycle class instance. LifecycleAccessor methods must be static and take zero arguments.  If either the start method or the stop methods is an
   * instance method, then this method must be defined.&lt;/p&gt;
   */
  public void setLifecycleAccessor( Method lifecycleAccessor ) { this.lifecycleAccessor = lifecycleAccessor; }
  /**
   * &lt;p&gt;Returns the method for accessing the lifecycle class instance.&lt;/p&gt;
   */
  public Method getLifecycleAccessor() { return this.lifecycleAccessor; }
  /**
   * &lt;p&gt;Sets the prefix mappings to use with the DocumentConfigContext for the start method. This should be a mapping of xml prefixes to valid namespaces.&lt;/p&gt;
   */
  public void setStartMethodPrefixMappings(Map&lt;String, String&gt; prefixMappings) { this.prefixMappings = prefixMappings; }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/xchain/framework/digester/AnnotationRuleSet.java</td><td><a href="./xref/org/xchain/framework/digester/AnnotationRuleSet.html#441">441</a></td></tr><tr class="b"><td>org/xchain/framework/digester/AnnotationRuleSet.java</td><td><a href="./xref/org/xchain/framework/digester/AnnotationRuleSet.html#488">488</a></td></tr><tr class="a"><td colspan='2'><div><pre>      }
    }

    /**
     * Finds the catalog that is closest to the top of the digesters stack.
     */
    protected Catalog findCatalogInStack()
    {
      Catalog catalog = null;

      if( log.isDebugEnabled() ) {
        log.debug(&quot;digester.getCount() = &quot;+digester.getCount());
      }

      for( int i = 0; i &lt; digester.getCount() &amp;&amp; catalog == null; i++ ) {
        Object peeked = digester.peek(i);

        if( log.isDebugEnabled() ) {
          log.debug(&quot;Looking for catalog in digester stack at index &quot;+i+&quot;.  Found object of type '&quot;+peeked.getClass().getName()+&quot;'.&quot;);
        }

        if( peeked instanceof Catalog ) {
          catalog = (Catalog)peeked;
        }
      }

      return catalog;
    }
  }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/xchain/namespaces/core/FilterVariableCommand.java</td><td><a href="./xref/org/xchain/namespaces/core/FilterVariableCommand.html#93">93</a></td></tr><tr class="b"><td>org/xchain/namespaces/core/VariableCommand.java</td><td><a href="./xref/org/xchain/namespaces/core/VariableCommand.html#96">96</a></td></tr><tr class="a"><td colspan='2'><div><pre>  public boolean execute( JXPathContext context )
    throws Exception
  {
    QName variableName = getName(context);
    Object variableValue = null;

    if( hasSelect() ) {
      variableValue = getSelect(context);
    }
    else if( hasSelectNodes() ) {
      variableValue = getSelectNodes(context);
    }
    else if( hasSelectSingleNode() ) {
      variableValue = getSelectSingleNode(context);
    }
    else {
      throw new Exception( &quot;Variable '&quot;+variableName+&quot;' must have a select attribute (select, select-nodes, or select-single-node)&quot; );
    }

    // get the scope.
    Scope scope = getScope(context);

    if( log.isDebugEnabled() ) {
      log.debug(&quot;Setting variable name '&quot;+variableName+&quot;' to value '&quot;+variableValue+&quot;' in scope '&quot;+scope+&quot;'.&quot;);
    }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/xchain/framework/lifecycle/LifecycleStepScanner.java</td><td><a href="./xref/org/xchain/framework/lifecycle/LifecycleStepScanner.html#328">328</a></td></tr><tr class="b"><td>org/xchain/framework/lifecycle/ThreadStepScanner.java</td><td><a href="./xref/org/xchain/framework/lifecycle/ThreadStepScanner.html#288">288</a></td></tr><tr class="a"><td colspan='2'><div><pre>  }

  private static Set&lt;QName&gt; toQNameSet( String[] qNameArray, String defaultUri )
    throws ScanException
  {
    Set&lt;QName&gt; qNameSet = new HashSet&lt;QName&gt;();
    for( String qNameString : qNameArray ) {
      QName qName = null;
      if( qNameString.startsWith(&quot;{&quot;) ) {
        qName = QName.valueOf(qNameString);
      }
      else if( qNameString.matches(&quot;[A-Za-z][-A-Za-z0-9._]*&quot;) ) {
        qName = new QName( defaultUri, qNameString );
      }
      else {
        throw new ScanException(&quot;The qname string '&quot;+qNameString+&quot;' does not appear to be a valid qname or local name.&quot;);
      }
      qNameSet.add(qName);
    }
    return qNameSet;
  }
}</pre></div></td></tr></table></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2013
                      XChain Framework.
            All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
